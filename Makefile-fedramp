import-nist:
	source ./automation/lib/import.sh && import_nist_catalog
.PHONY: import-nist

import-fedramp: import-nist
	source ./automation/lib/import.sh && import_fedramp_rev4_moderate_profiles
	trestle href --name fedramp_rev4_moderate -hr trestle://catalogs/nist_rev4_800_53/catalog.json
.PHONY: import-fedramp

bootstrap-workspace: import-fedramp
.PHONY: bootstrap-workspace

generate-fedramp-ssp:
	trestle author ssp-generate -p fedramp_rev4_moderate -o markdown/system-security-plans/acme_fedramp_demo_ssp -y extra/extra-ssp-metadata.yml
.PHONY: import-fedramp

generate-ssp-markdown: generate-fedramp-ssp
	trestle author jinja -i templates/ssp_md_template.md.jinja -ssp acme_fedramp_demo_ssp -p fedramp_rev4_moderate -o acme_fedramp_demo_ssp.md

generate-ssp-word: generate-ssp-markdown
	pandoc acme_fedramp_demo_ssp.md --from markdown+table_captions+implicit_figures+rebase_relative_paths -t docx --reference-doc templates/FedRAMP-SSP-Moderate-Baseline-Template.docx -s --toc -o acme_fedramp_demo_ssp.docx